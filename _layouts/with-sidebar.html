---
layout: default
---

<div class="with-sidebar-layout">
  <div class="container">
    <div class="columns is-variable is-2 is-multiline">
      <main class="column is-full-tablet is-three-quarters-desktop content">
        {{ content }}
      </main>

      <!-- Botón para mostrar el sidebar en móviles -->
      <button id="toggle-sidebar" class="button is-primary is-hidden-desktop">
        <span class="icon"><i class="fas fa-bars"></i></span>
        <span>Menú</span>
      </button>

      <aside id="sidebar" class="column is-one-quarter-desktop is-one-third-tablet is-hidden-touch"
        role="complementary">
        <div class="sticky-sidebar">
          <!-- Búsqueda -->
          <div class="card mb-3">
            <div class="card-content">
              <h2 id="search-title" class="title is-5 has-text-weight-semibold mb-3">
                Buscar
              </h2>
              <form action="{{ '/search/' | relative_url }}" method="get" role="search" aria-labelledby="search-title">
                <div class="field has-addons">
                  <div class="control is-expanded">
                    <input class="input is-rounded" type="search" name="q" placeholder="Buscar artículos..."
                      aria-label="Buscar artículos" required />
                  </div>
                  <div class="control">
                    <button type="submit" class="button is-primary is-rounded">
                      <span class="icon" aria-hidden="true"><i class="fas fa-search"></i></span>
                      <span class="is-hidden-touch">Buscar</span>
                    </button>
                  </div>
                </div>
              </form>
            </div>
          </div>

          <!-- Categorías -->
          <div class="card mb-3">
            <div class="card-content">
              <nav class="menu" aria-labelledby="categories-title">
                <p id="categories-title" class="menu-label">Categorías</p>
                <ul class="menu-list">
                  {% for category in site.categories %}
                  {% assign category_name = category[0] %}
                  {% assign category_page = site.pages | where: "category", category_name | first %}
                  {% assign category_icon = category_page.icon | default: "fa-folder" %}
                  <li>
                    <a href="{{ site.baseurl }}/{{ category_name | slugify }}"
                      class="{% if page.category == category_name %}is-active{% endif %}"
                      aria-label="Ver artículos de {{ category_name }}">
                      <span class="icon-text">
                        <span class="icon" aria-hidden="true">
                          <i class="fas {{ category_icon }}"></i>
                        </span>
                        <span>{{ category_page.title | default: category_name }}</span>
                      </span>
                    </a>
                  </li>
                  {% endfor %}
                </ul>
              </nav>
            </div>
          </div>

          <!-- Artículos Destacados -->
          <div class="card mb-3">
            <div class="card-content">
              <h2 class="title is-5 has-text-weight-semibold mb-3">
                Artículos Destacados
              </h2>
              <div class="featured-list">
                {% assign featured_posts = site.posts | where: "featured", true | where: "published", true | limit: 5 %}
                {% if featured_posts.size > 0 %}
                {% for post in featured_posts %}
                <a href="{{ post.url | relative_url }}" class="featured-item">
                  <div class="featured-info">
                    <strong>{{ post.title }}</strong>
                    <time datetime="{{ post.date | date_to_xmlschema }}" class="is-size-7 has-text-grey">
                      {{ post.date | date: "%d/%m/%Y" }}
                    </time>
                  </div>
                </a>
                {% endfor %}
                {% else %}
                <p class="has-text-grey">No hay artículos destacados</p>
                {% endif %}
              </div>
            </div>
          </div>
        </div>
      </aside>
    </div>
  </div>
</div>

<script src="{{ '/assets/js/post.js' | relative_url }}" defer></script>
<script src="{{ '/assets/js/search.js' | relative_url }}" defer></script>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const toggleButton = document.getElementById("toggle-sidebar");
    const sidebar = document.getElementById("sidebar");

    if (toggleButton && sidebar) {
      toggleButton.addEventListener("click", function () {
        sidebar.classList.toggle("is-hidden-touch");
      });
    }
  });
</script>