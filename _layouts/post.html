---
layout: with-sidebar
---

<section class="section">
  <article class="container article">
    <header class="media is-flex is-align-items-center mb-5">
      {% if page.image %}
      <div class="media-left">
        <figure class="image is-32x32">
          <img
            src="{{ page.image | relative_url }}"
            alt="Autor del artículo"
            class="is-rounded"
            loading="lazy"
            width="32"
            height="32"
          />
        </figure>
      </div>
      {% endif %}

      <div class="media-content is-flex is-align-items-center">
        <div class="has-text-grey">
          <time datetime="{{ page.date | date_to_xmlschema }}">
            Publicado el {{ page.date | date: "%d/%m/%Y" }}
          </time>
          {% if page.author %}
          <span class="mx-2">por</span>
          <strong>{{ page.author }}</strong>
          {% endif %}
        </div>
      </div>
    </header>

    <section class="content">{{ content }}</section>

    <div class="has-text-centered my-6">
      <button
        id="shareButton"
        class="button is-primary is-light is-rounded"
        aria-label="Compartir artículo"
        title="Compartir este artículo"
        role="button"
        tabindex="0"
      >
        <span class="icon-text">
          <span class="icon">
            <i class="fas fa-share-alt" aria-hidden="true"></i>
          </span>
          <span>Compartir</span>
        </span>
      </button>
    </div>
  </article>
</section>

<footer class="footer py-5">
  <nav class="level" aria-label="Navegación del artículo">
    <div class="level-item has-text-centered">
      <div class="buttons is-flex is-justify-content-center">
        <a
          href="{{ '/' | relative_url }}"
          class="button is-link is-rounded"
          aria-label="Inicio"
        >
          <span class="icon-text">
            <span class="icon">
              <i class="fas fa-home" aria-hidden="true"></i>
            </span>
            <span>Inicio</span>
          </span>
        </a>
        <button
          class="button is-link is-light is-rounded"
          title="Ir al inicio de la página"
          aria-label="Subir"
          onclick="window.scrollTo({ top: 0, behavior: 'smooth' });"
        >
          <span class="icon-text">
            <span class="icon">
              <i class="fas fa-arrow-up" aria-hidden="true"></i>
            </span>
            <span>Subir</span>
          </span>
        </button>
      </div>
    </div>
  </nav>
</footer>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    class ShareManager {
      constructor() {
        this.shareButton = document.getElementById("shareButton");
        this.shareData = {
          title: "{{ page.title }}",
          text: "¡Lee este artículo interesante en El Rincón de Hattrick!",
          url: window.location.href, // Se usa window.location.href para mayor compatibilidad
        };

        if (this.shareButton) {
          this.shareButton.addEventListener("click", () => this.handleShare());
        }
      }

      async handleShare() {
        if (navigator.share) {
          try {
            await navigator.share(this.shareData);
            console.log("Contenido compartido exitosamente.");
          } catch (error) {
            if (error.name !== "AbortError") {
              console.warn(
                "El usuario canceló o ocurrió un error al compartir.",
                error
              );
              this.showFallbackMessage();
            }
          }
        } else {
          this.showFallbackMessage();
        }
      }

      showFallbackMessage() {
        alert(
          `Lo sentimos, la función de compartir no está disponible.\n\nPuedes copiar esta URL manualmente:\n${this.shareData.url}`
        );
      }
    }

    new ShareManager();
  });
</script>
