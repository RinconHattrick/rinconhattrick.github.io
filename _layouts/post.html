---
layout: with-sidebar
---

<article class="container">
  <header class="media is-align-items-center mb-5">
    {% if page.image %}
    <div class="media-left">
      <figure class="image is-64x64">
        <img
          src="{{ page.image | relative_url }}"
          alt="Imagen del artículo: {{ page.title }}"
          class="is-rounded"
          loading="lazy"
          width="64"
          height="64"
        />
      </figure>
    </div>
    {% endif %}

    <div class="media-content">
      <div class="has-text-centered">
        <time
          datetime="{{ page.date | date_to_xmlschema }}"
          class="has-text-grey"
        >
          Publicado el {{ page.date | date: "%d/%m/%Y" }}
        </time>
        {% if page.author %}
        <span class="mx-2">por</span>
        <strong>{{ page.author }}</strong>
        {% endif %}
      </div>
    </div>
  </header>

  <section class="content">{{ content }}</section>

  <div class="has-text-centered my-6">
    <button
      id="shareButton"
      class="button is-primary is-rounded"
      aria-label="Compartir artículo"
    >
      <span class="icon-text">
        <span class="icon" aria-hidden="true">
          <i class="fas fa-share-alt"></i>
        </span>
        <span>Compartir</span>
      </span>
    </button>
  </div>
</article>

<footer class="section">
  <nav class="level" aria-label="Navegación del artículo">
    <div class="level-item">
      <div class="buttons is-centered">
        <a href="{{ '/' | relative_url }}" class="button is-link is-rounded">
          <span class="icon-text">
            <span class="icon" aria-hidden="true">
              <i class="fas fa-home"></i>
            </span>
            <span>Volver al Inicio</span>
          </span>
        </a>
        <a
          href="#main-header"
          class="button is-link is-light is-rounded"
          title="Ir al inicio de la página"
        >
          <span class="icon-text">
            <span class="icon" aria-hidden="true">
              <i class="fas fa-arrow-up"></i>
            </span>
            <span>Subir</span>
          </span>
        </a>
      </div>
    </div>
  </nav>
</footer>

<script>
  class ShareManager {
    constructor() {
      this.shareButton = document.getElementById("shareButton");
      this.shareData = {
        title: "{{ page.title }}",
        text: "¡Lee este artículo interesante en El Rincón de Hattrick!",
        url: window.location.href,
      };

      this.init();
    }

    init() {
      if (this.shareButton) {
        this.shareButton.addEventListener("click", () => this.handleShare());
      }
    }

    async handleShare() {
      try {
        if (navigator.share) {
          await navigator.share(this.shareData);
          console.log("Contenido compartido exitosamente");
        } else {
          this.showFallbackMessage();
        }
      } catch (error) {
        if (error.name !== "AbortError") {
          console.error("Error al compartir:", error);
          this.showFallbackMessage();
        }
      }
    }

    showFallbackMessage() {
      const message =
        `Lo sentimos, la función de compartir no está disponible.\n\n` +
        `URL del artículo: ${this.shareData.url}`;
      alert(message);
    }
  }

  document.addEventListener("DOMContentLoaded", () => new ShareManager());
</script>

<style>
  .icon-text {
    align-items: center;
    display: inline-flex;
    gap: 0.5rem;
  }

  @media print {
    .button {
      display: none;
    }
  }
</style>
