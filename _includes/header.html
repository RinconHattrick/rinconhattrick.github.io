<nav class="navbar is-fixed-top" aria-label="Menú principal">
  <div class="container">
    <div class="navbar-brand">
      <a class="navbar-item" href="{{ '/' | relative_url }}">
        <h1 class="title is-4 mb-0">
          <span class="icon-text">
            <span class="icon">
              <i class="fas fa-futbol"></i>
            </span>
            <span>El Rincón de Hattrick</span>
          </span>
        </h1>
      </a>

      <button
        class="navbar-burger"
        aria-label="Menú"
        aria-expanded="false"
        aria-controls="navbarMenu"
        onclick="document.getElementById('navbarMenu').classList.toggle('is-active'); this.classList.toggle('is-active');"
      >
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>

    <div id="navbarMenu" class="navbar-menu">
      <div class="navbar-end">
        <a
          class="navbar-item {% if page.url == '/' %}is-active{% endif %}"
          href="{{ '/' | relative_url }}"
          role="menuitem"
        >
          <span class="icon-text">
            <span class="icon">
              <i class="fas fa-home"></i>
            </span>
            <span>Inicio</span>
          </span>
        </a>

        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" aria-haspopup="true" aria-expanded="false">
            <span class="icon-text">
              <span class="icon">
                <i class="fas fa-folder"></i>
              </span>
              <span>Categorías</span>
            </span>
          </a>
          <div class="navbar-dropdown">
            {% if site.pages %} {% for category_page in site.pages %} {% if
            category_page.layout == "category" %}
            <a
              class="navbar-item {% if page.url contains category_page.permalink %}is-active{% endif %}"
              href="{{ category_page.permalink }}"
              role="menuitem"
            >
              <span class="icon-text">
                <span class="icon">
                  <i class="fas {{ category_page.icon }}"></i>
                </span>
                <span>{{ category_page.title }}</span>
              </span>
            </a>
            {% endif %} {% endfor %} {% else %}
            <a class="navbar-item" role="menuitem">
              No hay categorías disponibles
            </a>
            {% endif %}
          </div>
        </div>

        <a
          class="navbar-item {% if page.url contains '/acerca-de/' %}is-active{% endif %}"
          href="{{ '/acerca-de/' | relative_url }}"
          role="menuitem"
        >
          <span class="icon-text">
            <span class="icon">
              <i class="fas fa-info-circle"></i>
            </span>
            <span>Acerca de</span>
          </span>
        </a>

        <a
          class="navbar-item {% if page.url contains '/contacto/' %}is-active{% endif %}"
          href="{{ '/contacto/' | relative_url }}"
          role="menuitem"
        >
          <span class="icon-text">
            <span class="icon">
              <i class="fas fa-envelope"></i>
            </span>
            <span>Contáctanos</span>
          </span>
        </a>

        <a
          class="navbar-item"
          href="https://www.hattrick.org/?inviteRef=U8EHM5"
          target="_blank"
          rel="noopener noreferrer"
          role="menuitem"
        >
          <span class="icon-text">
            <span class="icon">
              <i class="fas fa-external-link-alt"></i>
            </span>
            <span>Hattrick</span>
          </span>
        </a>
      </div>
    </div>
  </div>
</nav>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    // Funcionalidad del menú móvil
    const burger = document.querySelector(".navbar-burger");
    const menu = document.querySelector(".navbar-menu");

    if (burger && menu) {
      burger.addEventListener("click", () => {
        const isExpanded = burger.getAttribute("aria-expanded") === "true";

        // Actualizar el aria-expanded
        burger.setAttribute("aria-expanded", !isExpanded);

        // Alternar la clase is-active en el menú
        menu.classList.toggle("is-active");
      });
    }

    // Cerrar menú al hacer clic fuera
    document.addEventListener("click", (e) => {
      const isClickInside =
        burger?.contains(e.target) || menu?.contains(e.target);

      if (!isClickInside && menu?.classList.contains("is-active")) {
        menu.classList.remove("is-active");
        if (burger) burger.setAttribute("aria-expanded", "false");
      }
    });
  });
</script>
